---
title: いい加減説明できるようにしたいAction,Func,Expression
tags:
  - ''
private: false
updated_at: ''
id: null
organization_url_name: null
slide: false
ignorePublish: false
---
# はじめに
C#を教えていると「デリゲートって結局なんすか？？」とよく質問されます。
「メソッドを引数に渡せてあげられる」と言うのは簡単ですが、正直自分も感覚値でしか理解していないので今後説明できるように記事にしようと思います。
あくまでサーバー側での話なので、イベント管理などの説明は省きます。

# 環境
C# 12 .NET8
xUnitで検証を行っていきます

# デリゲートとは
公式ドキュメントには以下のような記述がしてあります。

:::note
デリゲートは、C および C++ の関数ポインターのようなメソッドを安全にカプセル化する型です。 
ただし、C 関数ポインターとは異なり、デリゲートはオブジェクト指向で、タイプ セーフで、安全です。
:::

https://learn.microsoft.com/ja-jp/dotnet/csharp/programming-guide/delegates/using-delegates

CやC++の関数ポインタを使用したことある方ならこれだでざっくり理解できますが、そうでないなら意味不明ですね。
というかそれらの言語で関数ポインタまで理解してる人ならこの記事読まないし、「デリゲートって結局なんすか？？」とはならないですね。

## 簡単な使用例
以下のようにメソッドを変数のように扱うことができます。

```c#
// デリゲートの定義
public delegate void GreetingDelegate(string name);

[Fact(DisplayName = "そのまま使う")]
public void DelegateTest()
{
    // デリゲートのインスタンスを作成し、メソッドを参照
    GreetingDelegate greeting = new GreetingDelegate(SayHello);

    // デリゲートを使用してメソッドを呼び出す
    greeting("Alice");

    // 別のメソッドをデリゲートに割り当てる
    greeting = SayGoodbye;
    greeting("Bob");
}

void SayHello(string name)
{
    _output.WriteLine($"こんにちは、{name}さん！");
}

void SayGoodbye(string name)
{
    _output.WriteLine($"さようなら、{name}さん！");
}
```

デリゲートを使わないと以下のような処理になります。
```c#

            SayHello("Alice");
            SayGoodbye("Bob");
```

## 既存のメソッドとは何が違うの